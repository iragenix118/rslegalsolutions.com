!function(a){a.fn.theiaStickySidebar=function(b){var c={containerSelector:"",additionalMarginTop:0,additionalMarginBottom:0,updateSidebarHeight:!0,minWidth:0,sidebarBehavior:"modern"};b=a.extend(c,b),b.additionalMarginTop=parseInt(b.additionalMarginTop)||0,b.additionalMarginBottom=parseInt(b.additionalMarginBottom)||0,a("head").append(a('<style>.theiaStickySidebar:after {content: ""; display: table; clear: both;}</style>')),this.each(function(){var c,e,f;function d(){c.fixedScrollTop=0,c.sidebar.css({"min-height":"1px"}),c.stickySidebar.css({position:"static",width:""})}function g(c){var b=c.height();return c.children().each(function(){b=Math.max(b,a(this).height())}),b}c={},c.sidebar=a(this),c.options=b||{},c.container=a(c.options.containerSelector),0==c.container.size()&&(c.container=c.sidebar.parent()),c.sidebar.parents().css("-webkit-transform","none"),c.sidebar.css({position:"relative",overflow:"visible","-webkit-box-sizing":"border-box","-moz-box-sizing":"border-box","box-sizing":"border-box"}),c.stickySidebar=c.sidebar.find(".theiaStickySidebar"),0==c.stickySidebar.length&&(c.sidebar.find("script").remove(),c.stickySidebar=a("<div>").addClass("theiaStickySidebar").append(c.sidebar.children()),c.sidebar.append(c.stickySidebar)),c.marginTop=parseInt(c.sidebar.css("margin-top")),c.marginBottom=parseInt(c.sidebar.css("margin-bottom")),c.paddingTop=parseInt(c.sidebar.css("padding-top")),c.paddingBottom=parseInt(c.sidebar.css("padding-bottom")),e=c.stickySidebar.offset().top,f=c.stickySidebar.outerHeight(),c.stickySidebar.css("padding-top",1),c.stickySidebar.css("padding-bottom",1),e-=c.stickySidebar.offset().top,f=c.stickySidebar.outerHeight()-f-e,0==e?(c.stickySidebar.css("padding-top",0),c.stickySidebarPaddingTop=0):c.stickySidebarPaddingTop=1,0==f?(c.stickySidebar.css("padding-bottom",0),c.stickySidebarPaddingBottom=0):c.stickySidebarPaddingBottom=1,c.previousScrollTop=null,c.fixedScrollTop=0,d(),c.onScroll=function(c){var f,h,i,q,s,n,r,k,t,o,p,e,l,m,j;if(c.stickySidebar.is(":visible")){if(a("body").width()<c.options.minWidth)return void d();if(c.sidebar.outerWidth(!0)+50>c.container.width())return void d();f=a(document).scrollTop(),h="static",f>=c.container.offset().top+(c.paddingTop+c.marginTop-c.options.additionalMarginTop)&&(q=c.paddingTop+c.marginTop+b.additionalMarginTop,s=c.paddingBottom+c.marginBottom+b.additionalMarginBottom,n=c.container.offset().top,r=c.container.offset().top+g(c.container),k=0+b.additionalMarginTop,t=c.stickySidebar.outerHeight()+q+s<a(window).height(),i=t?k+c.stickySidebar.outerHeight():a(window).height()-c.marginBottom-c.paddingBottom-b.additionalMarginBottom,o=n-f+c.paddingTop+c.marginTop,p=r-f-c.paddingBottom-c.marginBottom,e=c.stickySidebar.offset().top-f,l=c.previousScrollTop-f,"fixed"==c.stickySidebar.css("position")&&"modern"==c.options.sidebarBehavior&&(e+=l),"legacy"==c.options.sidebarBehavior&&(e=i-c.stickySidebar.outerHeight(),e=Math.max(e,i-c.stickySidebar.outerHeight())),e=l>0?Math.min(e,k):Math.max(e,i-c.stickySidebar.outerHeight()),e=Math.max(e,o),e=Math.min(e,p-c.stickySidebar.outerHeight()),m=c.container.height()==c.stickySidebar.outerHeight(),h=(m||e!=k)&&(m||e!=i-c.stickySidebar.outerHeight())?f+e-c.sidebar.offset().top-c.paddingTop<=b.additionalMarginTop?"static":"absolute":"fixed"),"fixed"==h?c.stickySidebar.css({position:"fixed",width:c.sidebar.width(),top:e,left:c.sidebar.offset().left+parseInt(c.sidebar.css("padding-left"))}):"absolute"==h?(j={},"absolute"!=c.stickySidebar.css("position")&&(j.position="absolute",j.top=f+e-c.sidebar.offset().top-c.stickySidebarPaddingTop-c.stickySidebarPaddingBottom),j.width=c.sidebar.width(),j.left="",c.stickySidebar.css(j)):"static"==h&&d(),"static"!=h&&1==c.options.updateSidebarHeight&&c.sidebar.css({"min-height":c.stickySidebar.outerHeight()+c.stickySidebar.offset().top-c.sidebar.offset().top+c.paddingBottom}),c.previousScrollTop=f}},c.onScroll(c),a(document).scroll(function(a){return function(){a.onScroll(a)}}(c)),a(window).resize(function(a){return function(){a.stickySidebar.css({position:"static"}),a.onScroll(a)}}(c))})}}(jQuery)